<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>SpiderX Dashboard</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: radial-gradient(circle at top, #0f172a, #020617);
  color: white;
}

.container {
  max-width: 900px;
  margin: 60px auto;
  padding: 30px;
}

.card {
  background: rgba(255,255,255,0.03);
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 0 40px rgba(255,46,99,0.15);
}

h1 {
  font-size: 46px;
  letter-spacing: 1px;
  margin-bottom: 20px;
  filter: drop-shadow(0 0 18px rgba(255,46,99,0.25));
}

.label {
  opacity: 0.7;
  margin-top: 20px;
}

.key-box {
  background: #020617;
  padding: 14px;
  border-radius: 10px;
  margin-top: 8px;
  font-family: monospace;
}

button {
  margin-top: 25px;
  background: linear-gradient(135deg, #ff2e63, #ff5f9e);
  border: none;
  padding: 12px 25px;
  border-radius: 10px;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

button:hover {
  box-shadow: 0 0 25px rgba(255, 46, 99, 0.4);
}
</style>
</head>

<body>
<div class="container">
  <h1>SpiderX Dashboard</h1>

  <div class="card">
    <div class="label">Username</div>
    <div id="username" class="key-box">Loading...</div>

    <div class="label">Your API Key</div>
    <div id="apiKey" class="key-box">Loading...</div>

    <div class="label">Plan</div>
    <div id="plan" class="key-box">Loading...</div>

    <div class="label">Requests Used</div>
    <div id="requests" class="key-box">Loading...</div>

    <button onclick="logout()">Logout</button>
  </div>
</div>

<script>
const apiKey = localStorage.getItem("apiKey");

if (!apiKey) {
  location.href = "/";
}

fetch("/api/me", {
  headers: {
    "x-api-key": apiKey
  }
})
.then(res => res.json())
.then(data => {
  if (data.error) {
    alert("Session expired");
    logout();
    return;
  }

  document.getElementById("username").textContent = data.username;
  document.getElementById("apiKey").textContent = data.apiKey;
  document.getElementById("plan").textContent = data.plan;
  document.getElementById("requests").textContent = data.requests;
});

function logout() {
  localStorage.removeItem("apiKey");
  localStorage.removeItem("token");
  location.href = "/";
}
</script>
</body>
</html>
